def __create_qa_chain(self) -> RetrievalQA:
    print("[Creating QA chain...]")
    
    # 1. Verify components exist
    if not hasattr(self, 'llm') or self.llm is None:
        raise ValueError("LLM not initialized")
    
    if not hasattr(self, 'faiss_manager'):
        raise ValueError("FAISS manager not initialized")
    
    # 2. Create retriever
    retriever = self.faiss_manager.create_retriever(
        search_kwargs={"k": 3, "score_threshold": 0.7}
    )
    
    # 3. Create QA chain
    return RetrievalQA.from_chain_type(
        llm=self.llm,  # Fixed variable name (was self.11m)
        chain_type="stuff",
        retriever=retriever,
        return_source_documents=True
    )
	
	
	print("LLM type:", type(self.llm))
print("Is Runnable:", isinstance(self.llm, Runnable))